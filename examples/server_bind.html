<!DOCTYPE html>
<html>
  <body ng-app="ServerRepeatExample" ng-controller="testController">

    <h3>Posts count: {{posts.length}}</h3>

    <div>
        Latest article: {{posts[0].title}} from {{posts[0].author}}.

        <p>
            <strong>Tags:</strong>
        </p>
        <ul>
            <li ng-repeat="tag in posts[0].tags">
                {{tag}}
            </li>
        </ul>
    </div>

    <h2>Posts</h2>

    <!--
    <article server-repeat="post in posts" server-bind='{"id":1,"tags":["misc", "politics", "world"]}'>
        <h4 server-bind="title">My awesome first post</h4>
        <span class="author" server-bind="author">John Williams</span>
        <div class="summary" server-bind="summary">My awesome first post summary</div>
    </article>
    <article server-repeat="post in posts" server-bind='{"id":2,"tags":["tools", "misc"]}'>
        <h4 server-bind="title">My awesome second post</h4>
        <span class="author" server-bind="author">Peter Morello</span>
        <div class="summary" server-bind="summary">My awesome second post summary</div>
    </article>
    <article server-repeat="post in posts" server-bind='{"id":3,"tags":["music"]}'>
        <h4 server-bind="title">My awesome last post</h4>
        <span class="author" server-bind="author">Mark Lopez</span>
        <div class="summary" server-bind="summary">My awesome last post summary</div>
    </article>
    -->
    <div>
      <ul>
	<li ng-repeat="a in as">{{a.b}}</li>
      </ul>
    </div>
    
    <article server-repeat="post in posts">
      <div server-repeat-item>
	<h4 server-bind="title">Dynamic</h4>
	<span server-bind="author" class="author">James</span>
	<div server-bind="summary" class="summary">
	  <div server-bind="trash" class="grandkid">Blah</div>
	  <div>no bind</div>
	</div>
      </div>
      <div server-repeat-item-dynamic>
	<h4 ng-bind="post.title"></h4>
	<span ng-bind="post.author"></span>
	<div ng-bind="post.summary"></div>	
      </div> 
    </article>

    <!--
    <div server-repeat-item-dynamic>

      </div>
    -->
    <div>
      <button ng-click="testClick()">Test
    </div>
    <div>
      <button ng-click="testClick2()">Test
    </div>

    
    <script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/angularjs/1.3.9/angular.min.js"></script>
    <script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/angularjs/1.3.9/angular-animate.js"></script>
    <script type="text/javascript" src="../src/angular-server-repeat.js"></script>
    <script type="text/javascript">
      angular.module('ServerRepeatExample', ['ServerRepeat']).
      controller('testController', function($scope,$rootScope) {
      
      $scope.as = [{b:1},{b:2},{b:3}];
      
      $scope.testClick = function() {
        console.log('click');
      
        $scope.posts.push({
        //id : $scope.posts.length + 1
        // , tags : []
          title : 'test'
        , author : 'test'
        , summary : 'test'
        });
      }
        
      $scope.testClick2 = function() {
        $scope.posts[1].title = 'new thing';
      }     
        //$scope.posts.pop(); // = [];
        //}
      });

    </script>
  </body>
</html>
